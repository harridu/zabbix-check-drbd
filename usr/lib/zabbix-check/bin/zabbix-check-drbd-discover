#!/usr/bin/env bash

first=1
echo '{
    "data": ['

drbd-overview | awk -F ':' '{print $1}' | while read -e l; do
    if ! [[ "$l" =~ ^[0-9]+$ ]]; then
        continue
    fi
    if [ "$first" -eq "0" ]; then echo ","; fi
    first=0
    printf '\t{ "{#RES}": %d }' "$l"
done

echo '
    ]
}'
